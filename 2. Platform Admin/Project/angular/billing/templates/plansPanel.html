<div>

    <!--Plan Details Modal-->
    <div class="modal fade planDetailModal" tabindex="-1" role="dialog" aria-labelledby="planDetailModal" aria-hidden="true">
        <div class="modal-dialog modal-md">
            <div class="modal-content">

                <div class="modal-header" data-ng-show="!vm.planDeletion.Complete">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>

                    <h2 style="margin-top:-2px; margin-bottom:-2px;">
                        <span>
                            <img data-ng-show="vm.planDetail.Visible" src="/Images/Icons/PaymentPlans/visible_true.png" style="margin-top:-8px; margin-right:-2px; margin-left:-4px;">
                            <img data-ng-show="!vm.planDetail.Visible" src="/Images/Icons/PaymentPlans/visible_false.png" style="margin-top:-8px; margin-right:-2px; margin-left:-4px;">
                        </span>
                        {{ vm.planDetail.Name }}
                    </h2>
                </div>

                <div class="modal-header" data-ng-show="vm.planDeletion.Complete">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h2>Processing complete</h2>
                </div>

                <div class="modal-body" id="planDetailDefault" data-ng-show="!vm.planDeletion.Complete && !vm.planDeletion.Processing">

                    <div>
                        <div>
                            <tabset>

                                <tab active="vm.planDetail.DefaultTabActive" style="cursor:pointer" id="Info" heading="Info" data-ng-click="">

                                    <div style="margin-left:15px; margin-top:25px; margin-bottom:25px;">

                                       
                                        <h4>Monthly Rate:</h4>
                                        <h5 style="color:darkgreen"><strong>{{ vm.planDetail.MonthlyRate | currency }}</strong></h5>

                                        <hr />

                                        <h4>Plan Limitations:</h4>

                                        <div class="v-line-thin">
    
                                            <small style="margin-top:30px">Max Users:</small>
                                            <strong>{{ vm.planDetail.MaxUsers | number }} </strong>
                                            <br /><br />

                                            <small style="margin-top:30px">Max Categorizations (Per Set):</small>
                                            <strong>{{ vm.planDetail.MaxCategorizationsPerSet | number }} </strong>
                                            <br /><br />

                                            <small style="margin-top:30px">Max Categorizations (Total):</small>
                                            <strong>{{ vm.planDetail.MaxCategorizations | number }} </strong>
                                            <br /><br />

                                            <small style="margin-top:30px">Max Products (Per Set):</small>
                                            <strong>{{ vm.planDetail.MaxProductsPerSet | number }} </strong>
                                            <br /><br />

                                            <small style="margin-top:30px">Max Products (Total):</small>
                                            <strong>{{ vm.planDetail.MaxProducts | number }} </strong>
                                            <br /><br />

                                            <small style="margin-top:30px">Max Properties:</small>
                                            <strong>{{ vm.planDetail.MaxProperties | number }} </strong>
                                            <br /><br />

                                            <small style="margin-top:30px">Max Values Per Property:</small>
                                            <strong>{{ vm.planDetail.MaxValuesPerProperty | number }} </strong>
                                            <br /><br />

                                            <small style="margin-top:30px">Max Tags:</small>
                                            <strong>{{ vm.planDetail.MaxTags | number }} </strong>
                                            <br /><br />

                                            <small style="margin-top:30px">Max Image Groups:</small>
                                            <strong>{{ vm.planDetail.MaxImageGroups | number }} </strong>
                                            <br /><br />

                                            <small style="margin-top:30px">Max Image Formats:</small>
                                            <strong>{{ vm.planDetail.MaxImageFormats | number }} </strong>
                                            <br /><br />

                                            <small style="margin-top:30px">Max Image Galleries:</small>
                                            <strong>{{ vm.planDetail.MaxImageGalleries | number }} </strong>
                                            <br /><br />

                                            <small style="margin-top:30px">Max Images Per Gallery:</small>
                                            <strong>{{ vm.planDetail.MaxImagesPerGallery | number }} </strong>
                                            <br /><br />


                                            <small style="margin-top:30px">Support Hours:</small>
                                            <strong>{{ vm.planDetail.MonthlySupportHours | number }} </strong>
                                            <br /><br />

                                        </div>

                                        <h4>Plan Features:</h4>
                                        <div class="v-line-thin">

                                            <div style="margin-bottom:1px">
                                                <small>
                                                    <strong data-ng-show="vm.planDetail.AllowThemes"><i class="fa fa-check" style="color:green; font-size:14px; margin-right:5px"></i></strong>
                                                    <strong data-ng-show="!vm.planDetail.AllowThemes"><i class="fa fa-times" style="color:red; font-size:14px; margin-right:5px"></i></strong>
                                                    Themes
                                                </small>
                                            </div>

                                            <div style="margin-bottom:1px">
                                                <small>
                                                    <strong data-ng-show="vm.planDetail.AllowCustomOrdering"><i class="fa fa-check" style="color:green; font-size:14px; margin-right:5px"></i></strong>
                                                    <strong data-ng-show="!vm.planDetail.AllowCustomOrdering"><i class="fa fa-times" style="color:red; font-size:14px; margin-right:5px"></i></strong>
                                                    Custom Ordering
                                                </small>
                                            </div>

                                            <div style="margin-bottom:1px">
                                                <small>
                                                    <strong data-ng-show="vm.planDetail.AllowSalesLeads"><i class="fa fa-check" style="color:green; font-size:14px; margin-right:5px"></i></strong>
                                                    <strong data-ng-show="!vm.planDetail.AllowSalesLeads"><i class="fa fa-times" style="color:red; font-size:14px; margin-right:5px"></i></strong>
                                                    Sales Leads
                                                </small>
                                            </div>

                                            <div style="margin-bottom:1px">
                                                <small>
                                                    <strong data-ng-show="vm.planDetail.AllowLocationData"><i class="fa fa-check" style="color:green; font-size:14px; margin-right:5px"></i></strong>
                                                    <strong data-ng-show="!vm.planDetail.AllowLocationData"><i class="fa fa-times" style="color:red; font-size:14px; margin-right:5px"></i></strong>
                                                    Location Data
                                                </small>
                                            </div>


                                        </div>

                                        <br />
                                        <small style="color:darkgrey"><i>* Updates can be made directly on the database. Redis cache must be flushed after updates are made. Updates to plans are limited to the current environment. To replicate across environments, you must make each update individually.</i></small>

                                

                                        </div>

                                </tab>
                                

                                <tab style="cursor:pointer" id="Advanced" heading="Advanced" data-ng-click="vm.setAdvancedplanDetailTab()">

                                    <!-- ADVANCED -->
                                    <div style="margin-left:15px; margin-top:25px; margin-bottom:25px">


                                        <!-- Stripe/Frequency Variants -->
                                        <div data-ng-show="vm.planDetail.Variants.length > 0">
                                            <h4>Stripe/Frequency Variants:</h4>

                                            <div data-ng-repeat="variant in vm.planDetail.Variants" class="v-line-thin">
                                                <i class="fa fa-cc-stripe"></i> {{ variant }} <br/>
                                            </div>
                                            
                                            <hr />
                                        </div>




                                        <!-- VISIBLE STATE -->
                                        <div>
                                            <span>
                                                <img data-ng-show="vm.planDetail.Visible" src="/Images/ui/switch/switch-on-green-checked.gif" style="cursor:pointer" data-ng-click="vm.changePlanVisibleState(vm.planDetail.Name)" />
                                                <img data-ng-show="!vm.planDetail.Visible && vm.planDetail.Visible != null" src="/Images/ui/switch/switch-off.gif" style="cursor:pointer" data-ng-click="vm.changePlanVisibleState(vm.planDetail.Name)" />
                                                <img data-ng-show="vm.planDetail.Visible == null" src="/Images/ui/switch/switch-loading.gif" />
                                            </span>

                                            <small style="color:darkgrey; font-size:10px">
                                                <strong>
                                                    <span data-ng-show="vm.planDetail.Visible">Visible</span>
                                                    <span data-ng-show="!vm.planDetail.Visible && vm.planDetail.AllowImageEnhancements != null">Invisible</span>
                                                </strong>
                                            </small>
                                            <!--Result Error-->
                                            <div data-ng-show="vm.planDetail.updateVisibleState.complete && !vm.planDetail.updateVisibleState.isSuccess" style="margin-top:5px;">
                                                <small style="color:red"><span class="glyphicon glyphicon-remove"></span>&nbsp;&nbsp;{{ vm.planDetail.updateVisibleState.message }}</small>
                                                <span><button class="btn btn-default btn-xs" data-ng-click="vm.resetUpdatePlanVisibleStateResult()" style="margin-left:5px;">OK</button></span>
                                            </div>
                                        </div>





                                        <div id="StartPlanDeletion" data-ng-show="!vm.planDeletion.Verify && !vm.planDeletion.Processing && vm.checkRole('SuperAdmin')">

                                            <hr />
                                            <button type="button" class="btn btn-danger" data-ng-click="vm.startPlanDeletion()"><i class="glyphicon glyphicon-remove"></i> Delete plan</button>
                                        </div>

                                        <div id="VerifyDeletion" data-ng-show="vm.planDeletion.Verify">
                                            <hr />
                                            <div style="margin-bottom:20px;">
                                                <i class="fa fa-warning" style="color:red"></i> <span style="color:red"><strong>&nbsp;Are you sure you want to delete this plan?</strong></span>
                                            </div>
                                            <button class="btn btn-warning btn-sm" data-ng-click="vm.cancelPlanDeletion()">Cancel</button>
                                            <button class="btn btn-danger btn-sm" data-ng-click="vm.deletePlan(vm.planDetail.Name)"><i class="glyphicon glyphicon-remove"></i> Yes, delete this plan</button>
                                        </div>

                                    </div>

                                </tab>

                            </tabset>


                        </div>

                    </div>



                    <div class="modal-footer" data-ng-show="!vm.planDeletion.Complete" style="margin-bottom:-10px">

                        <button type="button" class="btn btn-primary" data-ng-click="vm.onplanDetailModalClose()" data-dismiss="modal">Done</button>

                    </div>

                </div>


                <div class="modal-body" id="PlanDeleting" data-ng-show="vm.planDeletion.Processing">

                    <section-loader message="'Deleting plan...'" loader-type="'inline'"></section-loader>
                    <br /><br />

                </div>

                <div class="modal-body" id="PlanUpdatesComplete" data-ng-show="vm.planDeletion.Complete">

                    <div ng-class="vm.planDeletion.IsSuccess ? 'alert alert-success' : 'alert alert-danger'" role="alert">
                        <div>
                            <i data-ng-show="vm.planDeletion.IsSuccess" class="fa fa-check" style="color:green"></i>
                            <i data-ng-show="!vm.planDeletion.IsSuccess" class="fa fa-warning" style="color:darkred"></i>
                            {{ vm.planDeletion.Message }}
                        </div>
                    </div>


                </div>

                <div class="modal-footer" id="PlanUpdatesComplete" data-ng-show="vm.planDeletion.Complete">

                    <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
                </div>

            </div>
        </div>
    </div>
    <!--End Plan Details Modal-->

    
    <div id="PaymentPlanGrid" style="padding-top:25px">

        <table class="table table-responsive table-striped">

            <tr>
                <th>Plan</th>
                <th>Monthly Rate</th>
                <th class="hidden-xs hidden-sm" style="text-align:center">Users</th>
                <th class="hidden-xs" style="text-align:center">Cats</th>
                <th class="hidden-xs hidden-sm hidden-md" style="text-align:center">Vars</th>
                <th class="hidden-xs hidden-sm hidden-md" style="text-align:center">PrPrCa</th>
                <th class="hidden-xs" style="text-align:center">Prods</th>
                <th class="hidden-xs hidden-sm hidden-md" style="text-align:center">Prps/Vals</th>
                <th class="hidden-xs hidden-sm" style="text-align:center">Tags</th>
                <th class="hidden-xs hidden-sm" style="text-align:center">Grps/Frmts</th>

                <th class="hidden-xs" style="text-align:center">Search Plan</th>

                <th></th>
            </tr>

            <tr data-ng-repeat="plan in vm.paymentPlans" style="font-size:15px;">

                <td style="color:#3B3B3B; font-size:18px"><img ng-src="/Images/Icons/PaymentPlans/visible_{{ plan.Visible }}.png"> {{ plan.PaymentPlanName }}</td>

                <td data-ng-show="plan.MonthlyRate <= 0">Free</td>
                <td data-ng-show="plan.MonthlyRate > 0"><i class="fa fa-cc-stripe"></i> {{ plan.MonthlyRate | currency }}</td>

                <td class="hidden-xs hidden-sm" style="text-align:center; font-size:12px;">{{ plan.MaxUsers | number }}</td>
                <td class="hidden-xs" style="text-align:center; font-size:12px;">{{ plan.MaxCategorizationsPerSet | number }}</td>
                <td class="hidden-xs hidden-sm hidden-md" style="text-align:center; font-size:12px;">{{ plan.MaxCategorizations | number }}</td>
                <td class="hidden-xs hidden-sm hidden-md" style="text-align:center; font-size:12px;">{{ plan.MaxProductsPerSet | number }}</td>
                <td class="hidden-xs" style="text-align:center; font-size:12px;">{{ plan.MaxProducts | number }}</td>
                <td class="hidden-xs hidden-sm hidden-md" style="text-align:center; font-size:12px;">{{ plan.MaxProperties | number }} / {{ plan.MaxValuesPerProperty | number }}</td>                
                <td class="hidden-xs hidden-sm" style="text-align:center; font-size:12px;">{{ plan.MaxTags | number }}</td>
                <td class="hidden-xs hidden-sm" style="text-align:center; font-size:12px;">{{ plan.MaxImageGroups | number }} / {{ plan.MaxImageFormats | number }}</td>

                <td class="hidden-xs" style="text-align:center"><b>{{ plan.SearchPlan }}</b></td>


                <td style="text-align:right">
                    <button class="btn btn-xs btn-default" data-toggle="modal" data-target=".planDetailModal" data-ng-click="vm.getPlanDetail($index, true)">Details</button>
                </td>


            </tr>

        </table>

        <hr />

        
        <small><b> Create new plans via SQL:</b></small>
        <div style="margin-top:8px;" class="well">INSERT INTO PaymentPlans (PaymentPlanName, MonthlyRate, MaxUsers, MaxCategorizationsPerSet, MaxProductsPerSet, MaxProducts, MaxProperties, MaxValuesPerProperty, MaxTags, AllowThemes, AllowSalesLeads, AllowImageEnhancements, AllowLocationData, AllowCustomOrdering, MonthlySupportHours, Visible, MaxImageGroups, MaxImageFormats, MaxImageGalleries, MaxImagesPerGallery, SearchPlan) VALUES	('PlanName', '000.00', '4', '80', '150', '50000', '120', '48', '220', '1', '1', '1', '1', '1','40','1','24','48', '24', '32','[Free-3/Basic-4/Standard-2]')</div>
        <div class="alert alert-danger">New plans must also be replicated in Stripe for Monthly & Yearly</div>
    </div>

</div>